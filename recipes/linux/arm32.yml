# minarch-cores Recipe: arm32
# Architecture: ARMv7VE with NEON-VFPv4
# Target Devices: Miyoo Mini, Miyoo Mini Plus, A30, Trimui Smart
#
# This file contains both CPU configuration and core definitions.
---
config:
  # Architecture settings
  arch: arm
  target_cross: arm-linux-gnueabihf-
  gnu_target_name: arm-buildroot-linux-gnueabihf

  # CPU-specific optimization flags
  target_cpu: cortex-a7
  target_arch: armv7ve
  target_optimization: "-march=armv7ve -mcpu=cortex-a7 -mtune=cortex-a7"
  target_float: "-mfloat-abi=hard -mfpu=neon-vfpv4"

  # Compiler flags
  target_cflags: "-O2 -pipe -fsigned-char"
  target_cxxflags: "-O2 -pipe -fsigned-char"
  target_ldflags: ""

  # Buildroot-style variables
  buildroot:
    BR2_arm: y
    BR2_cortex_a7: y
    BR2_ARM_EABIHF: y
    BR2_TOOLCHAIN_USES_GLIBC: y

# Core definitions
cores:
  a5200:
    repo: libretro/a5200
    target: master
    commit: 526404072821bb2021fab16f8c5dbbca300512c8
    build_type: make
    makefile: Makefile
    build_dir: "."
    platform: classic_armv7_a7
    so_file: a5200_libretro.so

  atari800:
    repo: libretro/libretro-atari800
    target: master
    commit: 6a18cb23cc4a7cecabd9b16143d2d7332ae8d44b
    build_type: make
    makefile: Makefile
    build_dir: "."
    platform: classic_armv7_a7
    so_file: atari800_libretro.so

  beetle-lynx:
    repo: libretro/beetle-lynx-libretro
    target: master
    commit: efd1797c7aa5a83c354507b1b61ac24222ebaa58
    build_type: make
    makefile: Makefile
    build_dir: "."
    platform: classic_armv7_a7
    so_file: mednafen_lynx_libretro.so
    extra_args:
      - NEED_BPP=16

  beetle-pce-fast:
    repo: libretro/beetle-pce-fast-libretro
    target: master
    commit: 7e9b257b8a591cb7e00f9e55371edba19db9799c
    build_type: make
    makefile: Makefile
    build_dir: "."
    platform: classic_armv7_a7
    so_file: mednafen_pce_fast_libretro.so
    extra_args:
      - NEED_BPP=16

  beetle-supergrafx:
    repo: libretro/beetle-supergrafx-libretro
    target: master
    commit: a776133c34ae8da5daf7d9ccb43e3e292e2b07b0
    build_type: make
    makefile: Makefile
    build_dir: "."
    platform: classic_armv7_a7
    so_file: mednafen_supergrafx_libretro.so

  beetle-vb:
    repo: libretro/beetle-vb-libretro
    target: master
    commit: 8f837ebc077afdd6652efb2827fd8308a07113ca
    build_type: make
    makefile: Makefile
    build_dir: "."
    platform: classic_armv7_a7
    so_file: mednafen_vb_libretro.so
    extra_args:
      - NEED_BPP=16

  bluemsx:
    repo: libretro/blueMSX-libretro
    target: master
    commit: 036376d6679c9e153712dbbb3fdca774afc49706
    build_type: make
    makefile: Makefile.libretro
    build_dir: "."
    platform: classic_armv7_a7
    so_file: bluemsx_libretro.so
    extra_args:
      - PLATFORM_DEFINES=-O3 -fdata-sections -ffunction-sections -fno-stack-protector -fno-ident -fomit-frame-pointer -falign-functions=1 -falign-jumps=1 -falign-loops=1 -fno-unwind-tables -fno-asynchronous-unwind-tables -fno-unroll-loops -fmerge-all-constants -fno-math-errno -marm -mtune=cortex-a7 -mfpu=neon-vfpv4 -mfloat-abi=hard

  fake08:
    repo: jtothebell/fake-08
    target: master
    commit: 0d26fd59103941e5f95e0ee665c6e0fb8c6b6f03
    build_type: make
    makefile: Makefile
    build_dir: platform/libretro
    platform: miyoomini
    so_file: platform/libretro/fake08_libretro_miyoomini.so
    output_name: fake08_libretro.so
    submodules: true

  fbneo:
    repo: libretro/FBNeo
    target: master
    commit: 2f41022002337ed20186144bbddb2d53392fab85
    build_type: make
    makefile: Makefile
    build_dir: src/burner/libretro
    platform: classic_armv7_a7
    so_file: src/burner/libretro/fbneo_libretro.so
    extra_args:
      - LDFLAGS+=-lpthread

  fceumm:
    repo: libretro/libretro-fceumm
    target: master
    commit: 5cd4a43e16a7f3cd35628d481c347a0a98cfdfa2
    build_type: make
    makefile: Makefile.libretro
    build_dir: "."
    platform: classic_armv7_a7
    so_file: fceumm_libretro.so
    extra_args:
      - HAVE_NTSC=0

  fuse:
    repo: libretro/fuse-libretro
    target: master
    commit: cad85b7b1b864c65734f71aa4a510b6f6536881c
    build_type: make
    makefile: Makefile.libretro
    build_dir: "."
    platform: classic_armv7_a7
    so_file: fuse_libretro.so

  gambatte:
    repo: libretro/gambatte-libretro
    target: master
    commit: 6924c76ba03dadddc6e97fa3660f3d3bc08faa94
    build_type: make
    makefile: Makefile.libretro
    build_dir: "."
    platform: classic_armv7_a7
    so_file: gambatte_libretro.so
    extra_args:
      - PLATFORM_DEFINES=-DCC_RESAMPLER -DCC_RESAMPLER_NO_HIGHPASS

  gpsp:
    repo: libretro/gpsp
    target: master
    commit: 74db5e5c73020626a1118b97d3735b5636d65d9d
    build_type: make
    makefile: Makefile
    build_dir: "."
    platform: classic_armv7_a7
    so_file: gpsp_libretro.so

  melonds:
    repo: libretro/melonds
    target: master
    commit: 7a3c11ff970cd36ca806961fae6db94b30dd5401
    build_type: make
    makefile: Makefile
    build_dir: "."
    platform: classic_armv7_a7
    so_file: melonds_libretro.so

  mgba:
    repo: libretro/mgba
    target: master
    commit: c758314a639aa0066e7b65a8341448181b73c804
    build_type: make
    makefile: Makefile.libretro
    build_dir: "."
    platform: classic_armv7_a7
    so_file: mgba_libretro.so

  mame2003-plus:
    repo: libretro/mame2003-plus-libretro
    target: master
    commit: 62c7089644966f6ac5fc79fe03592603579a409d
    build_type: make
    makefile: Makefile
    build_dir: "."
    platform: classic_armv7_a7
    so_file: mame2003_plus_libretro.so

  pcsx:
    repo: libretro/pcsx_rearmed
    target: master
    commit: 228c14e10e9a8fae0ead8adf30daad2cdd8655b9
    build_type: make
    makefile: Makefile.libretro
    build_dir: "."
    platform: classic_armv7_a7
    so_file: pcsx_rearmed_libretro.so

  picodrive:
    repo: libretro/picodrive
    target: master
    commit: 5b8cdea5cb06fb8d3d8ce7b88695f8dd00b4ac12
    build_type: make
    makefile: Makefile.libretro
    build_dir: "."
    platform: classic_armv7_a7
    so_file: picodrive_libretro.so
    submodules: true

  pokemini:
    repo: libretro/PokeMini
    target: master
    commit: 19095803f1434eb980db6e4004187a4b786e20b6
    build_type: make
    makefile: Makefile.libretro
    build_dir: "."
    platform: classic_armv7_a7
    so_file: pokemini_libretro.so

  prosystem:
    repo: libretro/prosystem-libretro
    target: master
    commit: acae250da8d98b8b9707cd499e2a0bf6d8500652
    build_type: make
    makefile: Makefile
    build_dir: "."
    platform: classic_armv7_a7
    so_file: prosystem_libretro.so

  race:
    repo: libretro/RACE
    target: master
    commit: 171950ea64c96ead503340ed60fa7ba18f56325c
    build_type: make
    makefile: Makefile
    build_dir: "."
    platform: classic_armv7_a7
    so_file: race_libretro.so

  scummvm:
    repo: libretro/scummvm
    target: master
    commit: 686cdd13719b92554fa46b264c512ca7deec7a96
    build_type: make
    makefile: Makefile
    build_dir: backends/platform/libretro
    platform: miyoomini
    so_file: backends/platform/libretro/scummvm_libretro.so

  snes9x2005:
    repo: libretro/snes9x2005
    target: master
    commit: 74d871db9b4dba6dbe6c5ecebc88cbf255be5349
    build_type: make
    makefile: Makefile
    build_dir: "."
    platform: classic_armv7_a7
    so_file: snes9x2005_plus_libretro.so
    extra_args:
      - USE_BLARGG_APU=1
    clean_extra: "rm -f source/apu_blargg.o"

  stella:
    repo: stella-emu/stella
    target: 6.7.1
    commit: bbef85b3da5ea0f0b6a8d06df5eea7b603bbec94
    build_type: make
    makefile: Makefile
    build_dir: src/libretro
    platform: classic_armv7_a7
    so_file: src/libretro/stella_libretro.so
    extra_args:
      - LDFLAGS+=-lpthread

  supafaust:
    repo: libretro/supafaust
    target: master
    commit: e25f66765938d33f9ad5850e8d6cd597e55b7299
    build_type: make
    makefile: Makefile
    build_dir: "."
    platform: classic_armv7_a7
    so_file: mednafen_supafaust_libretro.so

  vecx:
    repo: libretro/libretro-vecx
    target: master
    commit: 841229a6a81a0461d08af6488f252dcec5266c6a
    build_type: make
    makefile: Makefile.libretro
    build_dir: "."
    platform: classic_armv7_a7
    so_file: vecx_libretro.so
    extra_args:
      - GL_LIB=-lGLESv2

  vice:
    repo: libretro/vice-libretro
    target: master
    commit: e9f8ac034ddef3025f0567768f7af8219f7cfdb8
    build_type: make
    makefile: Makefile
    build_dir: "."
    platform: classic_armv7_a7
    so_file: vice_x64_libretro.so
